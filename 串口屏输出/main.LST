C51 COMPILER V9.60.0.0   MAIN                                                              06/28/2023 10:25:16 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN main.OBJ
COMPILER INVOKED BY: C:\Keil_v5_c51\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include <reg52.h>  
   2           
   3          #define uchar unsigned char  //å®å®šä¹‰ æŠŠunsigned charç®€å†™ä¸ºuchar
   4          #define uint unsigned int    //       æŠŠunsigned int ç®€å†™ä¸ºuint
   5            
   6          uint  i,j;      //å®šä¹‰å…¨å±€å˜é‡,æ‰§è¡Œç”µæœºforå¾ªç¯è½¬åŠ¨æ—¶é—´éœ€è¦ç”¨åˆ°
   7          
   8          sbit A1 = P2^0;       //å®šä¹‰ç»™æ­¥è¿›ç”µæœºå››ç›¸è¿æ¥çš„IOå£
   9          sbit B1 = P2^1;
  10          sbit C1 = P2^2;
  11          sbit D1 = P2^3;
  12          
  13          #define Coil_A {A1=1;B1=0;C1=0;D1=0;}     //Aç›¸é€šç”µï¼Œå…¶å®ƒç›¸æ–­ç”µ
  14          #define Coil_B {A1=0;B1=1;C1=0;D1=0;}     //Bç›¸é€šç”µï¼Œå…¶å®ƒç›¸æ–­ç”µ
  15          #define Coil_C {A1=0;B1=0;C1=1;D1=0;}     //Cç›¸é€šç”µï¼Œå…¶å®ƒç›¸æ–­ç”µ
  16          #define Coil_D {A1=0;B1=0;C1=0;D1=1;}     //Dç›¸é€šç”µï¼Œå…¶å®ƒç›¸æ–­ç”µ
  17          #define  Stop  {A1=0;B1=0;C1=0;D1=0;}     //å…¨éƒ¨æ–­ç”µï¼Œåœæ­¢
  18          
  19          uchar Speed=2;      //æ•´ä½“è°ƒé€Ÿï¼Œæ•°å­—è¶Šå°é€Ÿåº¦è¶Šå¿«ï¼Œè€ŒåŠ›çŸ©ä¹Ÿè¶Šå° 
  20          
  21          void Delay(uint xms)  //å»¶æ—¶å‡½æ•° 12.000MHz Delay(1)=1ms
  22          {                       //å»¶æ—¶ç¨‹åº ç”¨çƒ§å½•è½¯ä»¶è®¡ç®—å‡ºæ¥çš„ åœ¨å¦å¤–ä¸€ç« æœ‰å†™
  23   1         uchar i, j;
  24   1         while(xms--) 
  25   1        {
  26   2        i = 2;
  27   2        j = 239;
  28   2        do { while (--j); }
  29   2        while (--i);
  30   2        }
  31   1        
  32   1      }
  33          
  34             void corotation(void)  //æ­£è½¬ å­ç¨‹åº Aâ€”â€”D
  35            {         
  36   1           Coil_A 
  37   1          P1 = P2;    
  38   1           Delay(Speed);  
  39   1           Coil_B
  40   1          P1 = P2;  
  41   1           Delay(Speed);
  42   1           Coil_C
  43   1          P1 = P2;  
  44   1           Delay(Speed);
  45   1           Coil_D
  46   1          P1 = P2;  
  47   1           Delay(Speed);
  48   1        }
  49            
  50             void reversal(void)    //åè½¬ å­ç¨‹åº Dâ€”â€”A
  51            {
  52   1         Coil_D    
  53   1      P1 = P2;      
  54   1           Delay(Speed);  
  55   1           Coil_C
C51 COMPILER V9.60.0.0   MAIN                                                              06/28/2023 10:25:16 PAGE 2   

  56   1          P1 = P2;  
  57   1           Delay(Speed);
  58   1           Coil_B
  59   1          P1 = P2;  
  60   1           Delay(Speed);
  61   1           Coil_A
  62   1          P1 = P2;  
  63   1           Delay(Speed);
  64   1        }
  65            
  66            
  67             void main()        //ä¸»ç¨‹åº
  68            {
  69   1           Delay(30);    //å¯åŠ¨å‰å…ˆç¼“å†²ä¸€ä¸ª30ms
  70   1          
  71   1            while(1)     //ä¸æ–­å¾ªç¯
  72   1          { 
  73   2               for(i=0;i<500;i++)    //æ­£è½¬1åœˆ(å¤§æ¦‚ä½ç½®ï¼Œæ­¥è¿›ç”µæœºéœ€è¦ç¼–ç ç›˜æ‰èƒ½æµ‹å¾—æ¯”è¾ƒå‡
             -†ä¸€ç‚¹)
  74   2             corotation();         //è°ƒç”¨æ­£è½¬å­å‡½æ•°
  75   2        
  76   2              Stop                 //åœæ­¢
  77   2            Delay(1000);         //å»¶æ—¶1s
  78   2                  
  79   2             for(j=0;j<500;j++)    //åè½¬1åœˆ(å¤§æ¦‚ä½ç½®)
  80   2               reversal();           //è°ƒç”¨åè½¬å­å‡½æ•°
  81   2                
  82   2            Stop                 //åœæ­¢
  83   2            Delay(1000);         //å»¶æ—¶1s
  84   2          }
  85   1          
  86   1        }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    211    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =      5    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
